{% extends "base.html" %}

{% block title %}Mi Perfil - RAPPITESO{% endblock %}

{% block content %}
<div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
    <!-- Profile Header -->
    <div class="bg-white rounded-2xl shadow-lg overflow-hidden mb-6">
        <div class="bg-gradient-to-r from-[#004270] to-[#5C97C8] h-32"></div>
        <div class="px-8 pb-8 -mt-16">
            <div class="flex items-end justify-between">
                <div class="flex items-end space-x-6">
                    <div class="w-32 h-32 bg-white rounded-full border-4 border-white shadow-lg flex items-center justify-center">
                        <span class="text-4xl font-bold text-[#004270]">
                            {{ user.first_name.0|default:user.username.0|upper }}
                        </span>
                    </div>
                    <div class="pb-4">
                        <h1 class="text-3xl font-bold text-gray-800">
                            {{ user.get_full_name|default:user.username }}
                        </h1>
                        <p class="text-gray-600 mt-1">
                            <i class="fas fa-envelope mr-2"></i>
                            {{ user.email }}
                        </p>
                    </div>
                </div>
                <a href="{% url 'logout' %}" class="bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition font-medium">
                    <i class="fas fa-sign-out-alt mr-2"></i>
                    Cerrar Sesión
                </a>
            </div>
        </div>
    </div>
    
    <!-- Stats Cards -->
    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
        <!-- Total de Pedidos -->
        <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm mb-1">Total de Pedidos</p>
                    <p class="text-3xl font-bold text-gray-800">{{ total_orders }}</p>
                </div>
                <div class="w-12 h-12 bg-[#6ECFF3] bg-opacity-20 rounded-full flex items-center justify-center">
                    <i class="fas fa-shopping-bag text-[#004270] text-xl"></i>
                </div>
            </div>
        </div>
        
        <!-- Pedidos Pendientes -->
        <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm mb-1">Pedidos Pendientes</p>
                    <p class="text-3xl font-bold text-[#F59E0B]">{{ pending_orders }}</p>
                </div>
                <div class="w-12 h-12 bg-[#F59E0B] bg-opacity-20 rounded-full flex items-center justify-center">
                    <i class="fas fa-clock text-[#D97706] text-xl"></i>
                </div>
            </div>
        </div>
        
        <!-- Total Gastado -->
        <div class="bg-white rounded-xl shadow-md p-6 hover:shadow-lg transition">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm mb-1">Total Gastado</p>
                    <p class="text-3xl font-bold text-[#10B981]">${{ total_spent|floatformat:2 }}</p>
                </div>
                <div class="w-12 h-12 bg-[#10B981] bg-opacity-20 rounded-full flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-[#059669] text-xl"></i>
                </div>
            </div>
        </div>
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm mb-1">Pedidos Pendientes</p>
                    <p class="text-3xl font-bold text-gray-800">0</p>
                </div>
                <div class="w-12 h-12 bg-yellow-100 rounded-full flex items-center justify-center">
                    <i class="fas fa-clock text-yellow-600 text-xl"></i>
                </div>
            </div>
        </div>
        
        <div class="bg-white rounded-xl shadow-md p-6">
            <div class="flex items-center justify-between">
                <div>
                    <p class="text-gray-600 text-sm mb-1">Total Gastado</p>
                    <p class="text-3xl font-bold text-gray-800">$0</p>
                </div>
                <div class="w-12 h-12 bg-[#5C97C8] rounded-full flex items-center justify-center">
                    <i class="fas fa-dollar-sign text-white text-xl"></i>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Account Information -->
    <div class="bg-white rounded-xl shadow-md p-6 mb-6">
        <h2 class="text-2xl font-bold mb-6">Información de la Cuenta</h2>
        <div class="space-y-4">
            <div class="flex items-center justify-between py-3 border-b">
                <div class="flex items-center">
                    <i class="fas fa-user text-[#004270] mr-3 w-5"></i>
                    <div>
                        <p class="font-semibold text-gray-800">Usuario</p>
                        <p class="text-gray-600 text-sm">{{ user.username }}</p>
                    </div>
                </div>
                <button class="text-[#004270] hover:text-[#5C97C8] font-medium">
                    Editar
                </button>
            </div>
            
            <div class="flex items-center justify-between py-3 border-b">
                <div class="flex items-center">
                    <i class="fas fa-envelope text-[#004270] mr-3 w-5"></i>
                    <div>
                        <p class="font-semibold text-gray-800">Correo Electrónico</p>
                        <p class="text-gray-600 text-sm">{{ user.email }}</p>
                    </div>
                </div>
                <button class="text-[#004270] hover:text-[#5C97C8] font-medium">
                    Editar
                </button>
            </div>
            
            <div class="flex items-center justify-between py-3 border-b">
                <div class="flex items-center">
                    <i class="fas fa-id-card text-[#004270] mr-3 w-5"></i>
                    <div>
                        <p class="font-semibold text-gray-800">Nombre Completo</p>
                        <p class="text-gray-600 text-sm">{{ user.get_full_name|default:"No especificado" }}</p>
                    </div>
                </div>
                <button class="text-[#004270] hover:text-[#5C97C8] font-medium">
                    Editar
                </button>
            </div>
            
            {% if user.is_staff %}
            <div class="flex items-center justify-between py-3">
                <div class="flex items-center">
                    <i class="fas fa-shield-alt text-[#004270] mr-3 w-5"></i>
                    <div>
                        <p class="font-semibold text-gray-800">Tipo de Cuenta</p>
                        <p class="text-gray-600 text-sm">Administrador</p>
                    </div>
                </div>
                <a href="/admin/" class="text-[#004270] hover:text-[#5C97C8] font-medium">
                    Panel Admin
                </a>
            </div>
            {% endif %}
        </div>
    </div>
    
    <!-- Quick Actions -->
    <div class="bg-white rounded-xl shadow-md p-6">
        <h2 class="text-2xl font-bold mb-6">Acciones Rápidas</h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
            <a href="{% url 'order_list' %}" class="flex items-center p-4 border-2 border-gray-200 rounded-lg hover:border-[#004270] hover:bg-[#6ECFF3] hover:bg-opacity-10 transition">
                <i class="fas fa-shopping-bag text-[#004270] text-2xl mr-4"></i>
                <div>
                    <p class="font-semibold text-gray-800">Mis Pedidos</p>
                    <p class="text-gray-600 text-sm">Ver historial de pedidos</p>
                </div>
            </a>
            
            <a href="{% url 'restaurant_list' %}" class="flex items-center p-4 border-2 border-gray-200 rounded-lg hover:border-[#004270] hover:bg-[#6ECFF3] hover:bg-opacity-10 transition">
                <i class="fas fa-utensils text-[#004270] text-2xl mr-4"></i>
                <div>
                    <p class="font-semibold text-gray-800">Ver Restaurantes</p>
                    <p class="text-gray-600 text-sm">Explorar opciones de comida</p>
                </div>
            </a>
            
            <a href="#" class="flex items-center p-4 border-2 border-gray-200 rounded-lg hover:border-[#004270] hover:bg-[#6ECFF3] hover:bg-opacity-10 transition">
                <i class="fas fa-map-marker-alt text-[#004270] text-2xl mr-4"></i>
                <div>
                    <p class="font-semibold text-gray-800">Direcciones</p>
                    <p class="text-gray-600 text-sm">Gestionar direcciones de entrega</p>
                </div>
            </a>
            
            <a href="#" class="flex items-center p-4 border-2 border-gray-200 rounded-lg hover:border-[#004270] hover:bg-[#6ECFF3] hover:bg-opacity-10 transition">
                <i class="fas fa-credit-card text-[#004270] text-2xl mr-4"></i>
                <div>
                    <p class="font-semibold text-gray-800">Métodos de Pago</p>
                    <p class="text-gray-600 text-sm">Agregar tarjetas</p>
                </div>
            </a>
        </div>
    </div>
</div>
{% endblock %}
